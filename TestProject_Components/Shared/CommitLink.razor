@inject System.Net.Http.HttpClient HttpClient

@if (CommitHash != null)
{
    <a href="https://github.com/excubo-ag/Blazor.Diagrams/commit/@(CommitHash)" target="_blank">Built from @CommitHash</a>
}

@code {
    public string CommitHash { get; set; }
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            var file = await HttpClient.GetAsync("commit.txt");
            if (file.IsSuccessStatusCode)
            {
                CommitHash = await file.Content.ReadAsStringAsync();
            }
            await InvokeAsync(StateHasChanged);
        }
        await base.OnAfterRenderAsync(firstRender);
    }
}
