@inherits LinkBase
@using Excubo.Blazor.Diagrams.Extensions
@using (var temporary_culture = new CultureSwapper())
{
    if (Source != null && Target != null)
    {
        var sx = SourceX;
        var sy = SourceY;
        var tx = TargetX;
        var ty = TargetY;
        string curve_part;
        if (CurveTopBottom)
        {
            var mid_y = (SourceY + TargetY) / 2;
            curve_part = $"{sx} {mid_y}, {tx} {mid_y}";
        }
        else
        {
            var mid_x = (SourceX + TargetX) / 2;
            curve_part = $"{mid_x} {sy}, {mid_x} {ty}";
        }
        <path d="M @sx @sy
                 C @curve_part,
                   @tx @ty"
          stroke-width="3"
          fill="none"
          stroke="black" />
    }
}
@code {
    [Parameter]
    public bool CurveTopBottom { get; set; }
}